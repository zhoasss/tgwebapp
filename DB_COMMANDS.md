# üõ† –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–∞–∑–æ–π –î–∞–Ω–Ω—ã—Ö –∏ –°–µ—Ä–≤–µ—Ä–æ–º

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, —Å–±—Ä–æ—Å–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Ç–ª–∞–¥–∫–∏.

## üóëÔ∏è –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Hard Reset)

–≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª—è—é—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, —Å–æ–∑–¥–∞–≤–∞—è —á–∏—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–∞–∫ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ).

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —É–¥–∞–ª–∏—Ç—å volume —Å –¥–∞–Ω–Ω—ã–º–∏
docker compose down -v

# 2. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ volumes, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ
docker volume prune -f

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç –∑–∞–Ω–æ–≤–æ —Å –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker compose up --build -d
```

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π (0 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π). –ü–µ—Ä–≤—ã–π –≤—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞—Å—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID=1.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (–±–µ–∑ –≤—Ö–æ–¥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–ø–∏—Å–∞–Ω–æ –≤ —Ñ–∞–π–ª–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫–µ.

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
```bash
docker exec telegram-mini-app-backend python -c "
import sqlite3
conn = sqlite3.connect('/app/data/database.db')
cursor = conn.cursor()
cursor.execute('SELECT COUNT(*) FROM users')
print(f'üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î: {cursor.fetchone()[0]}')
conn.close()
"
```

### –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ID, Username, –ò–º—è)
```bash
docker exec telegram-mini-app-backend python -c "
import sqlite3
conn = sqlite3.connect('/app/data/database.db')
cursor = conn.cursor()
cursor.execute('SELECT id, telegram_id, username, first_name FROM users')
print('üìã –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:')
for row in cursor.fetchall():
    print(f'ID: {row[0]} | TG: {row[1]} | @{row[2]} | {row[3]}')
conn.close()
"
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ª—É–≥
```bash
docker exec telegram-mini-app-backend python -c "
import sqlite3
conn = sqlite3.connect('/app/data/database.db')
cursor = conn.cursor()
cursor.execute('SELECT COUNT(*) FROM services')
print(f'üíÜ‚Äç‚ôÄÔ∏è –£—Å–ª—É–≥ –≤ –ë–î: {cursor.fetchone()[0]}')
conn.close()
"
```

## üìú –õ–æ–≥–∏ –∏ –û—Ç–ª–∞–¥–∫–∞

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –±—ç–∫–µ–Ω–¥–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)
```bash
docker logs telegram-mini-app-backend --tail 100 -f
```
*–§–ª–∞–≥ `-f` –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞).*

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ –ª–æ–≥–∞—Ö
```bash
docker logs telegram-mini-app-backend --tail 50 | grep "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î"
```
*–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `URL=sqlite+aiosqlite:////app/data/database.db`*

## üíæ –ë—ç–∫–∞–ø –∏ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

### –°–∫–∞—á–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É (–∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
```bash
# 1. –°–Ω–∞—á–∞–ª–∞ –¥–æ—Å—Ç–∞–µ–º —Ñ–∞–π–ª –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
docker cp telegram-mini-app-backend:/app/data/database.db ./database.db
```

### üì• –°–∫–∞—á–∞—Ç—å —Å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ —Å–≤–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É **–Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ** (–æ—Ç–∫—Ä–æ–π—Ç–µ –Ω–æ–≤—ã–π —Ç–µ—Ä–º–∏–Ω–∞–ª, –Ω–µ –≤–Ω—É—Ç—Ä–∏ SSH):

```bash
# –°–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª database.db —Å —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Ç–µ–∫—É—â—É—é –ø–∞–ø–∫—É
scp root@178.72.136.133:~/zhoasss.github.io/database.db ./my_database_backup.db
```

*–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –∏–∑ –ø—É–Ω–∫—Ç–∞ –≤—ã—à–µ (–¥–æ—Å—Ç–∞—Ç—å –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞), —á—Ç–æ–±—ã —Ñ–∞–π–ª –ø–æ—è–≤–∏–ª—Å—è –≤ –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.*

### –ó–∞–π—Ç–∏ –≤–Ω—É—Ç—Ä—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±—ç–∫–µ–Ω–¥–∞
```bash
docker exec -it telegram-mini-app-backend /bin/bash
```
*–í–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –±–∞–∑–∞ –ª–µ–∂–∏—Ç –ø–æ –ø—É—Ç–∏ `/app/data/database.db`*

## üîÑ –ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ (–±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö)

–ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ (Python), –Ω–æ —Ö–æ—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ë–î:

```bash
docker compose restart backend
```
*–ò–ª–∏ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:*
```bash
docker compose up -d --build backend
```
